<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì´ˆ6 ì„¸ê³„ ìˆ˜ë„ í€´ì¦ˆ</title>
    <style>
        body { font-family: 'Nanum Gothic', sans-serif; text-align: center; background-color: #f0f8ff; }
        #game-container { max-width: 600px; margin: 50px auto; background: white; padding: 20px; border-radius: 15px; shadow: 0 0 10px rgba(0,0,0,0.1); }
        .hidden { display: none; }
        button { padding: 10px 20px; font-size: 18px; cursor: pointer; border-radius: 8px; border: none; background: #4CAF50; color: white; margin: 5px; }
        .option-btn { width: 80%; display: block; margin: 10px auto; background: #2196F3; }
        #timer { font-size: 20px; color: #ff4500; font-weight: bold; }
        table { width: 100%; margin-top: 20px; border-collapse: collapse; }
        th, td { border: 1px solid #ddd; padding: 8px; }
    </style>
</head>
<body>

<div id="game-container">
    <div id="start-screen">
        <h1>ì§€ë„ ë°•ì‚¬! ì„¸ê³„ ìˆ˜ë„ í€´ì¦ˆ</h1>
        <p>10ë¬¸ì œë¥¼ ê°€ì¥ ë¹ ë¥´ê²Œ í’€ì–´ë³´ì„¸ìš”!</p>
        <button onclick="startGame()">ì‹œì‘í•˜ê¸°</button>
    </div>

    <div id="quiz-screen" class="hidden">
        <div id="timer">ì‹œê°„: 0.00ì´ˆ</div>
        <h2 id="question-num">ë¬¸ì œ 1</h2>
        <h3 id="country-name">êµ­ê°€ëª…</h3>
        <div id="options">
            </div>
    </div>

    <div id="result-screen" class="hidden">
        <h2>ê²Œì„ ì¢…ë£Œ!</h2>
        <p id="final-score"></p>
        <p id="final-time"></p>
        <input type="text" id="nickname" placeholder="ë‹‰ë„¤ì„ ì…ë ¥">
        <button onclick="saveRanking()">ê¸°ë¡ ì €ì¥</button>
        <hr>
        <h3>ğŸ† ì‹¤ì‹œê°„ ë­í‚¹</h3>
        <table id="rank-table">
            <thead>
                <tr><th>ìˆœìœ„</th><th>ì´ë¦„</th><th>ì ìˆ˜</th><th>ì‹œê°„</th></tr>
            </thead>
            <tbody id="rank-list"></tbody>
        </table>
        <button onclick="location.reload()">ë‹¤ì‹œ í•˜ê¸°</button>
    </div>
</div>

<script>
    // 6í•™ë…„ ìˆ˜ì¤€ ë¬¸ì œ ë°ì´í„° (ìŠ¤í”„ë ˆë“œì‹œíŠ¸ì—ì„œ ê°€ì ¸ì˜¬ ë°ì´í„° í˜•ì‹)
    const quizData = [
        {country: "ëŒ€í•œë¯¼êµ­", capital: "ì„œìš¸", options: ["ì„œìš¸", "ë¶€ì‚°", "ì œì£¼", "ì¸ì²œ"]},
        {country: "ì¼ë³¸", capital: "ë„ì¿„", options: ["ì˜¤ì‚¬ì¹´", "êµí† ", "ë„ì¿„", "í›„ì¿ ì˜¤ì¹´"]},
        {country: "ë¯¸êµ­", capital: "ì›Œì‹±í„´ D.C.", options: ["ë‰´ìš•", "ë¡œìŠ¤ì•¤ì ¤ë ˆìŠ¤", "ì‹œì¹´ê³ ", "ì›Œì‹±í„´ D.C."]},
        {country: "í”„ë‘ìŠ¤", capital: "íŒŒë¦¬", options: ["íŒŒë¦¬", "ë¦¬ì˜¹", "ë§ˆë¥´ì„¸ìœ ", "ë² ë¥¼ë¦°"]},
        {country: "ì˜êµ­", capital: "ëŸ°ë˜", options: ["ë§¨ì²´ìŠ¤í„°", "ëŸ°ë˜", "ë¦¬ë²„í’€", "ì—ë“ ë²„ëŸ¬"]},
        {country: "ì¤‘êµ­", capital: "ë² ì´ì§•", options: ["ìƒí•˜ì´", "í™ì½©", "ê´‘ì €ìš°", "ë² ì´ì§•"]},
        {country: "ë…ì¼", capital: "ë² ë¥¼ë¦°", options: ["ë®Œí—¨", "ë² ë¥¼ë¦°", "í•¨ë¶€ë¥´í¬", "í”„ë‘í¬í‘¸ë¥´íŠ¸"]},
        {country: "ë¸Œë¼ì§ˆ", capital: "ë¸Œë¼ì§ˆë¦¬ì•„", options: ["ë¦¬ìš°ë°ìë„¤ì´ë£¨", "ìƒíŒŒìš¸ë£¨", "ë¸Œë¼ì§ˆë¦¬ì•„", "ì•„ë¥´í—¨í‹°ë‚˜"]},
        {country: "ì´íƒˆë¦¬ì•„", capital: "ë¡œë§ˆ", options: ["ë² ë„¤ì¹˜ì•„", "ë°€ë¼ë…¸", "ë‚˜í´ë¦¬", "ë¡œë§ˆ"]},
        {country: "ë² íŠ¸ë‚¨", capital: "í•˜ë…¸ì´", options: ["í˜¸ì¹˜ë¯¼", "ë‹¤ë‚­", "í•˜ë…¸ì´", "í›„ì—"]}
    ];

    let currentIdx = 0;
    let score = 0;
    let startTime;
    let timerInterval;
    let finalElapsedTime;

    function startGame() {
        document.getElementById('start-screen').classList.add('hidden');
        document.getElementById('quiz-screen').classList.remove('hidden');
        startTime = Date.now();
        timerInterval = setInterval(updateTimer, 10);
        showQuestion();
    }

    function updateTimer() {
        let now = Date.now();
        finalElapsedTime = ((now - startTime) / 1000).toFixed(2);
        document.getElementById('timer').innerText = `ì‹œê°„: ${finalElapsedTime}ì´ˆ`;
    }

    function showQuestion() {
        if (currentIdx >= 10) {
            endGame();
            return;
        }
        let q = quizData[currentIdx];
        document.getElementById('question-num').innerText = `ë¬¸ì œ ${currentIdx + 1}/10`;
        document.getElementById('country-name').innerText = `${q.country}ì˜ ìˆ˜ë„ëŠ” ì–´ë””ì¼ê¹Œìš”?`;
        
        const optionsDiv = document.getElementById('options');
        optionsDiv.innerHTML = '';
        q.options.forEach(opt => {
            const btn = document.createElement('button');
            btn.className = 'option-btn';
            btn.innerText = opt;
            btn.onclick = () => checkAnswer(opt);
            optionsDiv.appendChild(btn);
        });
    }

    function checkAnswer(answer) {
        if (answer === quizData[currentIdx].capital) {
            score++;
        }
        currentIdx++;
        showQuestion();
    }

    function endGame() {
        clearInterval(timerInterval);
        document.getElementById('quiz-screen').classList.add('hidden');
        document.getElementById('result-screen').classList.remove('hidden');
        document.getElementById('final-score').innerText = `ì ìˆ˜: ${score * 10}ì `;
        document.getElementById('final-time').innerText = `ì†Œìš” ì‹œê°„: ${finalElapsedTime}ì´ˆ`;
        displayRankings();
    }

    function saveRanking() {
        const nickname = document.getElementById('nickname').value;
        if (!nickname) { alert("ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ì„¸ìš”!"); return; }

        let rankings = JSON.parse(localStorage.getItem('quizRankings')) || [];
        rankings.push({ name: nickname, score: score * 10, time: parseFloat(finalElapsedTime) });

        // ì •ë ¬: ì ìˆ˜ ë†’ì€ ìˆœ -> ì‹œê°„ ì§§ì€ ìˆœ
        rankings.sort((a, b) => b.score - a.score || a.time - b.time);
        
        localStorage.setItem('quizRankings', JSON.stringify(rankings));
        displayRankings();
        document.getElementById('nickname').value = '';
        alert("ê¸°ë¡ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!");
    }

    function displayRankings() {
        const rankings = JSON.parse(localStorage.getItem('quizRankings')) || [];
        const list = document.getElementById('rank-list');
        list.innerHTML = '';
        rankings.slice(0, 5).forEach((rank, index) => {
            list.innerHTML += `<tr><td>${index + 1}</td><td>${rank.name}</td><td>${rank.score}</td><td>${rank.time}s</td></tr>`;
        });
    }
</script>

</body>
</html>